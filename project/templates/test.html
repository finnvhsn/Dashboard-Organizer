<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
        </script>
    
    <style> 
        
        .grid-container
        {
           display: grid;
           grid-template-areas: 'header header header header header header '
                                'left left left  right right right'
                                'left-bottom left-bottom left-bottom  right-bottom right-bottom right-bottom';
           column-gap: 40px;
           row-gap: 50px; 
           width: 1383px;
           background-image: linear-gradient( 135deg, #79F1A4 10%, #0E5CAD 100%);
          
           margin: 0 auto;
           margin-left: -8px;
           height: 1200px;;
        
        }


        .header
        { 
         display: flex;
         grid-area: header;
         justify-content: space-between;
         align-items: center;
         padding: 10px;
         background-color: #333;
         color: #fff;
         height: 40px;
         position: sticky;
         top: 0;
         z-index: 1000;
         width: 1370px;
         margin-top: -10px;
         margin-left: -8px;
        }

        
        .header_menu
        {
          display: flex; 
          gap: 20px;
        }

        .header_title
        {
           font-size: 35px; 
           padding-left: 5px;
        }
        
       
        .container-stock
        {
            display: flex;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0.5, 0.3);
            grid-area: left; 
            width:800px;
            height: 500px;
            margin-left: 30px;
            ;
            
        }

        .graph
        {  
            justify-content: center; 
            padding-left: 30px;
            size: 70%;
            padding-top: 45px; 
             
        }

        .container-stock:hover
        {
            transform: translateY(5px);
        }

        .stock_header
        {
            item-align:center;
              
            padding-left: 30px;
            
        }

        .container-weather
        {   
            grid-area: right; 
            width: 500px;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0.5, 0.5);
            border-radius: 15px;
            margin-right: 80px;
            margin-top: 0px;

        }

        .weather
        {
            height: 100px;
            width: 400px;
            padding-left: 50px;
        }

        .weather_header
        {   
            text-align:center;
        }

        .space-news-container
        {
            grid-area: left-bottom;
            margin-left: 30px;
            width: 800px;
            height: 80%;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0.5, 0.5);
            border-radius: 15px;
            overflow-y: auto;   
        }
        
        .space-news-container::-webkit-scrollbar
         {
            width: 10px;
         }
        
        .article-container
        {
           height: auto;
        }

        .news_header
        {
            text-align:center;
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: #fff;
            height: 40px;
            padding-top; 3px;
        }
        
        .header_color
        {
            color: black;
            text-decoration: none;
        }
        
        .f1-results-table 
        {
            width: auto;
            margin-bottom: 20px;
            grid-area: right-bottom;
            overflow-y: auto; 
            height: 80%;;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0.5, 0.5);
            border-radius: 15px;
            margin-right: 100px;

        }
        
        .f1_header
        {
          text-align: center;
          position: sticky;
          top: 0;
          z-index: 1000;
          background-color: #fff;
          height: 40px;
          padding-top; 3px;
        }

        .f1-results-table::-webkit-scrollbar
         {
            width: 10px;
         }
        
        .f1-results-table table 
        {
            width: auto;
            border-collapse: collapse;
        }
        
        .f1-results-table th,
        .f1-results-table td 
        {
            border: 1px solid #dddddd;
            padding: 8px;
            text-align: left;
        }
        
        .f1-results-table th 
        {
            background-color: #f2f2f2;
        }
        
        .f1-results-table tbody tr:nth-child(even)
        {
            background-color: #f2f2f2;
        }
        
        .f1-results-table tbody tr:hover 
        {
            background-color: #dddddd;
        }

       
        
    </style>
        
</head>

<body>

  <div class="grid-container">

    <header class= "header">
        <div class="header_title"> Personal Dashboard</div>
        <div class="header_menu"> <p>my account </p>  <p>  <a style= "color: #fff; text-decoration: none;" href="http://127.0.0.1:5000/login">Login </a> </p>  <p>settings</p></div> 
    </header>

    <div class="container-stock">
        <h2 class= "stock_header">Stocks</h2>
        <div class="graph">
            {{ finances | safe }}
        </div>
    </div>

    <div class="container-weather">
      <div class= "weather_header">  <h2 >Weather Data</h2> </div>
        <div class="weather">
            <iframe src="{{ weather_url }}"
            scrolling="no" 
            style="border:none;min-height:400px; width:100%; height:100%;">
            </iframe>
        </div>
    </div>

    <div class="space-news-container">
        <h2 class= "news_header">Space News</h2>
        <ul>
            {% for article in articles %}
            <li>
                <div class="article-container">
                    <div class="article-details">
                        <h2><a class="header_color" href="{{ article.url }}">{{ article.title }}</a></h2>
                        {% if article.imageUrl %}
                        <img src="{{ article.imageUrl }}" alt="Thumbnail" class="thumbnail" style= "max-width: 200px;">
                        {% endif %}
                        <strong>Published At:</strong> {{ article.publishedAt }}
                        <p>{{ article.summary }}</p>
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>

    <div class="f1-results-table">
        <h2 class= "f1_header"> F1 Results </h2>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Race</th>
                    <th>Position</th>
                    <th>Driver</th>
                    <th>Constructor</th>
                </tr>
            </thead>
            <tbody>
                {% for race in f1_results %}
                {% for result in race['Results'] %}
                <tr>
                    {% if loop.first %}
                    <td rowspan="{{ loop.length }}">{{ race['Race'] }}</td>
                    {% endif %}
                    <td>{{ result['Position'] }}</td>
                    <td>{{ result['Driver'] }}</td>
                    <td>{{ result['Constructor'] }}</td>
                </tr>
                {% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </div>
    
  </div>

</body>
</html>